---
title: "data_visualisation"
author: "Kristine Stoltenberg Addington"
date: "6/17/2021"
output: html_document
---
```{r}
# Load packages
source(here::here("R/package-loading.R"))

# Load the small, tidied dataset from the wrangling session
load(here::here("data/nhanes_small.rda"))

```

# One variable plots 

```{r continuous-variables}
# Create density plot for BMI
ggplot(nhanes_small, aes (x = bmi)) +
    geom_density()

# Create histogram for BMI
ggplot(nhanes_small, aes(x = bmi)) +
    geom_histogram()
```


```{r descrete-variables}
# Create count barplot for sex
ggplot(nhanes_small, aes(x = sex)) +
    geom_bar()

# Create count barplot for diabetes status
ggplot(nhanes_small, aes(x = diabetes)) +
    geom_bar()

```


```{r remove-missing-diabetes}
# Remove individuals with missing diabetes status
nhanes_tidied <- nhanes_small %>% 
    filter(!is.na(diabetes))

# Save the tidied dataset as an rda file in the data folder
usethis::use_data(nhanes_tidied, overwrite = TRUE)

# Create a new count barplot for diabetes status
ggplot(nhanes_tidied, aes(x = diabetes)) +
    geom_bar()

```

# Plotting two variables

```{r two-continous-variables}
#using two continuus variables 
bmi_chol <- ggplot(nhanes_tidied, aes(x = bmi, y = tot_chol))

# Standard scatter plot
bmi_chol +
    geom_point()

# Standard scatter plot, but with hexagons
bmi_chol + 
    geom_hex()

# Runs a smoothing line with confidence interval
bmi_chol + 
    geom_smooth()

# Or combine two geoms, hex plot with smoothing line
bmi_chol + 
    geom_hex() +
    geom_smooth()

```

```{r two-descrete-variables}
# Two categorical/discrete variables
# Note that we can pipe data into ggplot

two_descrete <- nhanes_tidied %>% 
    ggplot(aes(x = diabetes, fill = sex))

# Stacked
two_descrete +
    geom_bar()

# "dodged" (side-by-side) bar plot
two_descrete +
    geom_bar(position = position_dodge())

```

```{r descrete-continous-variables}

# Using mixed data
two_mixed <- nhanes_tidied %>% 
    ggplot(aes(x = diabetes, y = bmi))

# Standard boxplot with outliers
two_mixed + 
    geom_boxplot()

# Show the actual data using a jitter plot
two_mixed +
    geom_jitter()

# Show the distribution with a violin plot
two_mixed + 
    geom_violin()

```

